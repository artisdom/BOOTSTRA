CALL PUSH CS
CALL POP DS
CALL MOV SI WORD 130

CALL LABEL SPLIT
CALL LODSB
CALL CMP AL BYTE 32
CALL JNE %SPLIT%
CALL MOV [SI+BYTE] 65535 BYTE 0

CALL MOV DX WORD 130
CALL MOV AL BYTE 1
CALL MOV AH BYTE 61
CALL INT 33
CALL JC %ERROR%
CALL MOV BX AX
CALL MOV AL BYTE 2
CALL XOR CX CX
CALL XOR DX DX
CALL MOV AH BYTE 66
CALL INT 33
CALL JC %ERROR%
CALL XOR AL AL
CALL LABEL DECODE
CALL MOV CL [SI]
CALL INC SI
CALL CMP CL BYTE 13
CALL JE %DONE%
CALL MOV DL BYTE 10
CALL MUL DL
CALL ADD AL CL
CALL SUB AL BYTE 48
CALL JMP %DECODE%
CALL LABEL DONE
CALL MOV [WORD] 0%BUF% AL
CALL MOV CX WORD 1
CALL MOV DX WORD %BUF%
CALL MOV AH BYTE 64
CALL INT 33
CALL JC %ERROR%
CALL MOV AH BYTE 62
CALL INT 33
CALL LABEL ERROR
CALL INT 32
CALL LABEL BUF
CALL DB 0
